"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[501],{5680:(e,t,n)=>{n.d(t,{xA:()=>d,yg:()=>y});var o=n(6540);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,i=function(e,t){if(null==e)return{};var n,o,i={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var p=o.createContext({}),s=function(e){var t=o.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):a(a({},t),e)),n},d=function(e){var t=s(e.components);return o.createElement(p.Provider,{value:t},e.children)},u="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},g=o.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),u=s(n),g=i,y=u["".concat(p,".").concat(g)]||u[g]||c[g]||r;return n?o.createElement(y,a(a({ref:t},d),{},{components:n})):o.createElement(y,a({ref:t},d))}));function y(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,a=new Array(r);a[0]=g;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l[u]="string"==typeof e?e:i,a[1]=l;for(var s=2;s<r;s++)a[s]=n[s];return o.createElement.apply(null,a)}return o.createElement.apply(null,n)}g.displayName="MDXCreateElement"},4272:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var o=n(8168),i=(n(6540),n(5680));const r={sidebar_position:7},a="EAS Preview",l={unversionedId:"workflows/eas",id:"workflows/eas",title:"EAS Preview",description:"Set up workflow to run EAS Preview for every Pull Request.",source:"@site/docs/workflows/eas.mdx",sourceDirName:"workflows",slug:"/workflows/eas",permalink:"/setup-ci/docs/workflows/eas",draft:!1,tags:[],version:"current",sidebarPosition:7,frontMatter:{sidebar_position:7},sidebar:"tutorialSidebar",previous:{title:"Maestro",permalink:"/setup-ci/docs/workflows/maestro"},next:{title:"Auxiliary Workflows",permalink:"/setup-ci/docs/category/auxiliary-workflows"}},p={},s=[{value:"Usage",id:"usage",level:2},{value:"Detailed behavior",id:"detailed-behavior",level:2},{value:"Installed dependencies",id:"installed-dependencies",level:3},{value:"Expo token",id:"expo-token",level:3},{value:"App credentials",id:"app-credentials",level:3},{value:"Modified and created files",id:"modified-and-created-files",level:3},{value:"Workflow details",id:"workflow-details",level:3},{value:"Known issues and limitations",id:"known-issues-and-limitations",level:2}],d={toc:s},u="wrapper";function c(e){let{components:t,...r}=e;return(0,i.yg)(u,(0,o.A)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.yg)("h1",{id:"eas-preview"},"EAS Preview"),(0,i.yg)("p",null,"Set up workflow to run EAS Preview for every Pull Request."),(0,i.yg)("admonition",{type:"caution"},(0,i.yg)("p",{parentName:"admonition"},"Currently SCI can generate EAS Preview workflow in Expo projects only.")),(0,i.yg)("p",null,"This workflow is meant to integrate your app with ",(0,i.yg)("a",{parentName:"p",href:"https://expo.dev/"},"expo.dev"),".\nIt uses ",(0,i.yg)("a",{parentName:"p",href:"https://github.com/expo/expo-github-action/tree/main/continuous-deploy-fingerprint"},"Expo continuous-deploy-fingerprint action"),"\nto publish EAS Updates and trigger EAS Builds in development profile\nwhen the fingerprint of the app changes. You can learn more with Expo documentation on\n",(0,i.yg)("a",{parentName:"p",href:"https://docs.expo.dev/build/introduction"},"EAS Build"),",\n",(0,i.yg)("a",{parentName:"p",href:"https://docs.expo.dev/eas-update/introduction"},"EAS Update")," and\n",(0,i.yg)("a",{parentName:"p",href:"https://expo.dev/blog/fingerprint-your-native-runtime"},"Expo fingerprint"),"."),(0,i.yg)("p",null,"Additionally, a comment will be created in your PR with a link to the build\nand a QR code to scan and open the app on your device with the latest update:"),(0,i.yg)("p",null,(0,i.yg)("img",{alt:"eas-preview-gh-comment",src:n(6360).A,width:"1468",height:"1148"})),(0,i.yg)("h2",{id:"usage"},"Usage"),(0,i.yg)("pre",null,(0,i.yg)("code",{parentName:"pre",className:"language-bash"},"npx setup-ci --preset --eas\n")),(0,i.yg)("h2",{id:"detailed-behavior"},"Detailed behavior"),(0,i.yg)("p",null,"Below you can find detailed information about what the script does with your project when generating EAS Preview workflow."),(0,i.yg)("h3",{id:"installed-dependencies"},"Installed dependencies"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"expo")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"expo-dev-client")),(0,i.yg)("li",{parentName:"ul"},(0,i.yg)("inlineCode",{parentName:"li"},"expo-updates"))),(0,i.yg)("h3",{id:"expo-token"},"Expo token"),(0,i.yg)("p",null,"This workflow communicated with ",(0,i.yg)("a",{parentName:"p",href:"https://expo.dev/"},"expo.dev")," and needs to authenticate with your Expo account.\nTherefore, you will be prompted to provide an Expo token as repository secret. You can learn more\nabout using Expo with GitHub actions in ",(0,i.yg)("a",{parentName:"p",href:"https://docs.expo.dev/eas-update/github-actions"},"Expo with GitHub actions"),"."),(0,i.yg)("h3",{id:"app-credentials"},"App credentials"),(0,i.yg)("p",null,"SCI will ask you whether you want to configure credentials for signing apps built with EAS Build.\nThis step is free for Android app, but to setup credentials for iOS you need a paid Apple Developer account.\nIf you skip this step, your iOS builds will only be able to be run on iOS simulator.\nYou can learn more at ",(0,i.yg)("a",{parentName:"p",href:"https://docs.expo.dev/app-signing/app-credentials/"},"App credentials"),"."),(0,i.yg)("h3",{id:"modified-and-created-files"},"Modified and created files"),(0,i.yg)("table",null,(0,i.yg)("tr",null,(0,i.yg)("th",{style:{width:"40%"}},"File"),(0,i.yg)("th",null,"Changes")),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("code",null,".github/workflows/eas.yml")),(0,i.yg)("td",null,"Contains the CI workflow")),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("code",null,"package.json")),(0,i.yg)("td",null,"Missing dependencies are added")),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("code",null,"app.json")),(0,i.yg)("td",null,"Set ",(0,i.yg)("code",null,"expo.runtimeVersion.policy")," to ",(0,i.yg)("code",null,"fingerprint"),"(if ",(0,i.yg)("code",null,"app.config.js")," is detected, you will be prompted to do it manually)")),(0,i.yg)("tr",null,(0,i.yg)("td",null,(0,i.yg)("code",null,"eas.json")),(0,i.yg)("td",null,"Created with basic EAS configuration if not detected"))),(0,i.yg)("h3",{id:"workflow-details"},"Workflow details"),(0,i.yg)("p",null,"The following diagram represents the flow of EAS Preview workflow:"),(0,i.yg)("mermaid",{value:'flowchart TD;\n    A["\ud83c\udf3f Setup Node"]--\x3eB["\u039b Setup EAS\\nUsing <a href=\'https://github.com/expo/expo-github-action\'>expo/expo-github-action</a>"]\n    B--\x3eC["\ud83d\udce6 Install dependencies"];\n    C--\x3eD["\ud83d\ude80 Create Preview with EAS Build and Update\\nUsing <a href=\'https://github.com/expo/expo-github-action/tree/main/continuous-deploy-fingerprint\'>expo/expo-github-action/continuous-deploy-fingerprint</a>"]'}),(0,i.yg)("h2",{id:"known-issues-and-limitations"},"Known issues and limitations"),(0,i.yg)("ul",null,(0,i.yg)("li",{parentName:"ul"},"Currently SCI can generate EAS Preview workflow in Expo projects only.")))}c.isMDXComponent=!0},6360:(e,t,n)=>{n.d(t,{A:()=>o});const o=n.p+"assets/images/eas-preview-gh-comment-868a6eea49956454fcf6bc3ff027af6a.png"}}]);